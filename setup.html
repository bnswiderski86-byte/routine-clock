<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-QKPMS6ZSTF"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-QKPMS6ZSTF');
</script>
  <meta charset="UTF-8" />
  <title>Routine Clock â€“ Parent Setup</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      margin: 0;
      padding: 1.5rem;
      background: #f5f7fb;
      color: #222;
    }
    h1 {
      margin-top: 0;
      font-size: 1.8rem;
    }
    h2 {
      margin-top: 0;
      font-size: 1.4rem;
    }
    .section {
      background: #fff;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 6px rgba(0,0,0,0.05);
    }
    label {
      font-weight: 600;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 0.5rem;
    }
    th, td {
      border-bottom: 1px solid #e1e4f0;
      padding: 0.4rem;
      text-align: left;
      font-size: 0.9rem;
    }
    input[type="text"], input[type="time"] {
      width: 100%;
      padding: 0.25rem 0.4rem;
      font-size: 0.9rem;
    }
    .buttons {
      display: flex;
      gap: 0.75rem;
      margin-top: 1rem;
      flex-wrap: wrap;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      border-radius: 6px;
      border: none;
      cursor: pointer;
    }
    .primary {
      background: #4f46e5;
      color: #fff;
    }
    .secondary {
      background: #e5e7eb;
      color: #111827;
    }
    .danger {
      background: #ef4444;
      color: #fff;
    }
    .palette-swatches {
      display: flex;
      gap: 0.75rem;
      margin-top: 0.5rem;
      flex-wrap: wrap;
    }
    .swatch {
      display: flex;
      align-items: center;
      gap: 0.3rem;
      cursor: pointer;
    }
    .swatch-colors {
      display: inline-flex;
      overflow: hidden;
      border-radius: 999px;
      border: 1px solid #cbd5f5;
    }
    .swatch-colors span {
      width: 14px;
      height: 14px;
    }
    .small-note {
      font-size: 0.8rem;
      color: #6b7280;
      margin-top: 0.25rem;
    }
    .row-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.5rem;
      flex-wrap: wrap;
    }

    /* Mobile-optimized layout */
    @media (max-width: 768px) {
      body {
        padding: 0.75rem;
      }
      
      h1 {
        font-size: 1.3rem;
        margin-bottom: 0.5rem;
      }
      
      h2 {
        font-size: 1.1rem;
        margin-bottom: 0.4rem;
      }
      
      .section {
        padding: 0.85rem;
        margin-bottom: 1.25rem;
        overflow-x: hidden;
      }
      
      table {
        font-size: 0.9rem;
        margin-top: 0.75rem;
        table-layout: fixed;
        width: 100%;
      }
      
      /* Balanced column widths */
      th:first-child, td:first-child {
        width: 35%;
      }
      
      th:nth-child(2), td:nth-child(2),
      th:nth-child(3), td:nth-child(3) {
        width: 25%;
      }
      
      th:last-child, td:last-child {
        width: 15%;
        text-align: center;
      }
      
      /* Clean rows with simple spacing */
      th, td {
        padding: 0.5rem 0.25rem;
        border-bottom: 1px solid #e5e7eb;
      }
      
      th {
        font-size: 0.85rem;
        background: #f9fafb;
      }
      
      tbody tr {
        background: white;
      }
      
      tbody tr + tr {
        border-top: 8px solid #f5f7fb;
      }
      
      /* Cleaner inputs */
      input[type="text"], input[type="time"] {
        padding: 0.6rem 0.4rem;
        font-size: 0.95rem;
        border: 1px solid #d1d5db;
        border-radius: 4px;
        background: white;
        width: 100%;
      }
      
      /* Normal font for time inputs */
      td:nth-child(2) input[type="time"],
      td:nth-child(3) input[type="time"] {
        font-size: 0.9rem;
        padding: 0.6rem 0.35rem;
      }
      
      /* Emoji input */
      td:last-child input[type="text"] {
        padding: 0.5rem 0.3rem;
        font-size: 1.2rem;
        text-align: center;
      }
      
      button {
        padding: 0.65rem 1rem;
        font-size: 0.95rem;
        min-height: 42px;
      }
      
      .buttons, .row-buttons {
        flex-direction: column;
        gap: 0.75rem;
        margin-top: 1rem;
      }
      
      .buttons button, .row-buttons button {
        width: 100%;
      }
      
      .palette-swatches {
        flex-direction: column;
        gap: 0.85rem;
        margin-top: 0.75rem;
      }
      
      .swatch {
        padding: 0.6rem;
        background: #f9fafb;
        border-radius: 6px;
      }
      
      .swatch-colors span {
        width: 16px;
        height: 16px;
      }
      
      p, .small-note {
        font-size: 0.9rem;
        line-height: 1.5;
        margin-bottom: 0.4rem;
      }
    }

    /* Extra small screens */
    @media (max-width: 480px) {
      .section {
        padding: 0.75rem 0.6rem;
      }
      
      /* Proportional adjustments for tiny screens */
      th:first-child, td:first-child {
        width: 31%;
      }
      
      th:nth-child(2), td:nth-child(2),
      th:nth-child(3), td:nth-child(3) {
        width: 27%;
      }
      
      th:last-child, td:last-child {
        width: 15%;
      }
      
      th, td {
        padding: 0.45rem 0.2rem;
      }
      
      tbody tr + tr {
        border-top: 6px solid #f5f7fb;
      }
      
      input[type="text"], input[type="time"] {
        font-size: 0.9rem;
        padding: 0.55rem 0.35rem;
      }
      
      td:nth-child(2) input[type="time"],
      td:nth-child(3) input[type="time"] {
        font-size: 0.85rem;
        padding: 0.55rem 0.3rem;
      }
    }
  </style>
</head>
<body>
  <h1>Routine Clock â€“ Parent Setup</h1>
  <p>
    Use this page to create your child's schedule and choose which icons (emoji) to represent
    each activity. When you click "Save &amp; View Clock", this device will remember your
    schedule and show it on the clock page.
  </p>

  <!-- Palette -->
  <div class="section">
    <h2>1. Choose color palette</h2>
    <p class="small-note">Pick the colors for the wedges on the clock.</p>
    <div class="palette-swatches">
      <label class="swatch">
        <input type="radio" name="palette" value="soft" checked />
        <span>Soft</span>
        <span class="swatch-colors">
          <span style="background:#fde68a"></span>
          <span style="background:#bfdbfe"></span>
          <span style="background:#bbf7d0"></span>
          <span style="background:#fecaca"></span>
        </span>
      </label>
      <label class="swatch">
        <input type="radio" name="palette" value="bold" />
        <span>Bold</span>
        <span class="swatch-colors">
          <span style="background:#f97316"></span>
          <span style="background:#22c55e"></span>
          <span style="background:#3b82f6"></span>
          <span style="background:#e11d48"></span>
        </span>
      </label>
      <label class="swatch">
        <input type="radio" name="palette" value="calm" />
        <span>Calm</span>
        <span class="swatch-colors">
          <span style="background:#a5b4fc"></span>
          <span style="background:#7dd3fc"></span>
          <span style="background:#6ee7b7"></span>
          <span style="background:#fde68a"></span>
        </span>
      </label>
      <label class="swatch">
        <input type="radio" name="palette" value="neutrals" />
        <span>Neutrals</span>
        <span class="swatch-colors">
          <span style="background:#f5f5dc"></span>
          <span style="background:#f4e1c1"></span>
          <span style="background:#e8c39e"></span>
          <span style="background:#d2a679"></span>
        </span>
      </label>
    </div>
  </div>

  <!-- Weekday day -->
  <div class="section">
    <h2>2. Weekday daytime schedule (Monâ€“Fri)</h2>
    <p class="small-note">
      Monâ€“Fri. Day mode runs from 7am to 7pm. Please enter your weekday schedule from 7am to 7pm.
    </p>
    <table>
      <thead>
        <tr>
          <th>Activity</th>
          <th>Start</th>
          <th>End</th>
          <th>Icon (emoji)</th>
        </tr>
      </thead>
      <tbody id="weekday-day-rows">
        <tr>
          <td><input type="text" value="Wake up" /></td>
          <td><input type="time" value="07:00" /></td>
          <td><input type="time" value="07:30" /></td>
          <td><input type="text" value="â˜€ï¸" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Breakfast" /></td>
          <td><input type="time" value="07:30" /></td>
          <td><input type="time" value="08:00" /></td>
          <td><input type="text" value="ðŸ¥ž" /></td>
        </tr>
        <tr>
          <td><input type="text" value="School / Care" /></td>
          <td><input type="time" value="08:00" /></td>
          <td><input type="time" value="15:00" /></td>
          <td><input type="text" value="ðŸ«" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Snack" /></td>
          <td><input type="time" value="15:00" /></td>
          <td><input type="time" value="15:30" /></td>
          <td><input type="text" value="ðŸŽ" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Play time" /></td>
          <td><input type="time" value="15:30" /></td>
          <td><input type="time" value="17:15" /></td>
          <td><input type="text" value="ðŸ§¸" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Mom home" /></td>
          <td><input type="time" value="17:15" /></td>
          <td><input type="time" value="17:45" /></td>
          <td><input type="text" value="ðŸ‘©â€ðŸ‘¦" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Dinner" /></td>
          <td><input type="time" value="17:45" /></td>
          <td><input type="time" value="18:30" /></td>
          <td><input type="text" value="ðŸ½ï¸" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Bath time" /></td>
          <td><input type="time" value="18:30" /></td>
          <td><input type="time" value="19:00" /></td>
          <td><input type="text" value="ðŸ«§" /></td>
        </tr>
      </tbody>
    </table>
    <div class="row-buttons">
      <button type="button" class="secondary" id="add-weekday-day-row">
        + Add weekday daytime activity
      </button>
      <button type="button" class="danger" id="remove-weekday-day-row">
        âˆ’ Remove last
      </button>
    </div>
  </div>

  <!-- Weekday night -->
  <div class="section">
    <h2>3. Weekday night schedule (Monâ€“Fri)</h2>
    <p class="small-note">
      Monâ€“Fri. Night mode runs from 7pm to 7am. Please enter your weekday night schedule from 7pm to 7am.
    </p>
    <table>
      <thead>
        <tr>
          <th>Activity</th>
          <th>Start</th>
          <th>End</th>
          <th>Icon (emoji)</th>
        </tr>
      </thead>
      <tbody id="weekday-night-rows">
        <tr>
          <td><input type="text" value="Tv time" /></td>
          <td><input type="time" value="19:00" /></td>
          <td><input type="time" value="21:00" /></td>
          <td><input type="text" value="ðŸ“º" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Games" /></td>
          <td><input type="time" value="21:00" /></td>
          <td><input type="time" value="22:00" /></td>
          <td><input type="text" value="ðŸŽ®" /></td>
        </tr>
      </tbody>
    </table>
    <div class="row-buttons">
      <button type="button" class="secondary" id="add-weekday-night-row">
        + Add weekday night activity
      </button>
      <button type="button" class="danger" id="remove-weekday-night-row">
        âˆ’ Remove last
      </button>
    </div>
  </div>

  <!-- Weekend day -->
  <div class="section">
    <h2>4. Weekend daytime schedule (Satâ€“Sun)</h2>
    <p class="small-note">
      Sat &amp; Sun day mode runs from 7am to 7pm. Please enter your weekend day schedule from 7am to 7pm.
    </p>
    <table>
      <thead>
        <tr>
          <th>Activity</th>
          <th>Start</th>
          <th>End</th>
          <th>Icon (emoji)</th>
        </tr>
      </thead>
      <tbody id="weekend-day-rows">
        <tr>
          <td><input type="text" value="Wake up" /></td>
          <td><input type="time" value="08:00" /></td>
          <td><input type="time" value="08:30" /></td>
          <td><input type="text" value="â°" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Breakfast" /></td>
          <td><input type="time" value="08:30" /></td>
          <td><input type="time" value="09:00" /></td>
          <td><input type="text" value="ðŸ¥ž" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Free play / Outing" /></td>
          <td><input type="time" value="09:00" /></td>
          <td><input type="time" value="12:00" /></td>
          <td><input type="text" value="ðŸ§¸" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Lunch" /></td>
          <td><input type="time" value="12:00" /></td>
          <td><input type="time" value="13:00" /></td>
          <td><input type="text" value="ðŸ¥ª" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Afternoon play" /></td>
          <td><input type="time" value="13:00" /></td>
          <td><input type="time" value="17:00" /></td>
          <td><input type="text" value="ðŸŽ¨" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Dinner" /></td>
          <td><input type="time" value="17:00" /></td>
          <td><input type="time" value="18:00" /></td>
          <td><input type="text" value="ðŸ½ï¸" /></td>
        </tr>
      </tbody>
    </table>
    <div class="row-buttons">
      <button type="button" class="secondary" id="add-weekend-day-row">
        + Add weekend daytime activity
      </button>
      <button type="button" class="danger" id="remove-weekend-day-row">
        âˆ’ Remove last
      </button>
    </div>
  </div>

  <!-- Weekend night -->
  <div class="section">
    <h2>5. Weekend night schedule (Satâ€“Sun)</h2>
    <p class="small-note">
      Sat &amp; Sun night mode runs from 7pm to 7am. Please enter your weekend night schedule from 7pm to 7am.
    </p>
    <table>
      <thead>
        <tr>
          <th>Activity</th>
          <th>Start</th>
          <th>End</th>
          <th>Icon (emoji)</th>
        </tr>
      </thead>
      <tbody id="weekend-night-rows">
        <tr>
          <td><input type="text" value="Tv time" /></td>
          <td><input type="time" value="19:00" /></td>
          <td><input type="time" value="21:00" /></td>
          <td><input type="text" value="ðŸ“º" /></td>
        </tr>
        <tr>
          <td><input type="text" value="Games" /></td>
          <td><input type="time" value="21:00" /></td>
          <td><input type="time" value="22:00" /></td>
          <td><input type="text" value="ðŸŽ®" /></td>
        </tr>
      </tbody>
    </table>
    <div class="row-buttons">
      <button type="button" class="secondary" id="add-weekend-night-row">
        + Add weekend night activity
      </button>
      <button type="button" class="danger" id="remove-weekend-night-row">
        âˆ’ Remove last
      </button>
    </div>
  </div>

  <!-- Save section -->
  <div class="section">
    <h2>6. Save and open the clock</h2>
    <p class="small-note">
      This saves only on this device in this browser. To use on another device, open this page there and set the schedule again.
    </p>
    <div class="buttons">
      <button class="primary" id="save-and-open">Save &amp; View Clock</button>
      <button class="secondary" id="clear-schedule" type="button">
        Clear saved schedule on this device
      </button>
    </div>
    <p id="status" class="small-note"></p>
  </div>

  <script>
    const PALETTES = {
      soft: ["#fde68a", "#bfdbfe", "#bbf7d0", "#fecaca", "#e9d5ff", "#fee2e2"],
      bold: ["#f97316", "#22c55e", "#3b82f6", "#e11d48", "#a855f7", "#0ea5e9"],
      calm: ["#a5b4fc", "#7dd3fc", "#6ee7b7", "#fde68a", "#f9a8d4", "#c4b5fd"],
      neutrals: ["#f5f5dc", "#f4e1c1", "#e8c39e", "#d2a679", "#b58863", "#8b5a2b"]
    };

    function addActivityRow(tbodyId) {
      const tbody = document.getElementById(tbodyId);
      if (!tbody) return;
      const currentRows = tbody.querySelectorAll("tr").length;
      if (currentRows >= 15) return;

      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td><input type="text" value="" /></td>
        <td><input type="time" value="" /></td>
        <td><input type="time" value="" /></td>
        <td><input type="text" value="" /></td>
      `;
      tbody.appendChild(tr);
    }

    function removeLastRow(tbodyId) {
      const tbody = document.getElementById(tbodyId);
      if (!tbody) return;
      const rows = tbody.querySelectorAll("tr");
      if (rows.length <= 1) return;
      tbody.removeChild(rows[rows.length - 1]);
    }

    function fillTable(tasks, tbodySelector) {
      const tbody = document.querySelector(tbodySelector);
      if (!tbody || !tasks) return;

      tbody.innerHTML = "";

      tasks.forEach(task => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td><input type="text" value="${task.label || ""}" /></td>
          <td><input type="time" value="${task.start || ""}" /></td>
          <td><input type="time" value="${task.end || ""}" /></td>
          <td><input type="text" value="${task.icon || ""}" /></td>
        `;
        tbody.appendChild(tr);
      });
    }

    function collectTasks(tableId, colors) {
      const rows = document.querySelectorAll(`#${tableId} tr`);
      const tasks = [];
      let colorIndex = 0;

      rows.forEach(row => {
        const inputs = row.querySelectorAll("input");
        const label = inputs[0].value.trim();
        const start = inputs[1].value;
        const end = inputs[2].value;
        const icon = inputs[3].value.trim();

        if (!label || !start || !end) return;

        const color = colors[colorIndex % colors.length];
        colorIndex++;

        tasks.push({ label, start, end, color, icon: icon || "â¬¤" });
      });

      return tasks;
    }

    document.addEventListener("DOMContentLoaded", () => {
      const map = [
        ["add-weekday-day-row", "remove-weekday-day-row", "weekday-day-rows"],
        ["add-weekday-night-row", "remove-weekday-night-row", "weekday-night-rows"],
        ["add-weekend-day-row", "remove-weekend-day-row", "weekend-day-rows"],
        ["add-weekend-night-row", "remove-weekend-night-row", "weekend-night-rows"]
      ];

      map.forEach(([addId, removeId, tbodyId]) => {
        const addBtn = document.getElementById(addId);
        const removeBtn = document.getElementById(removeId);
        if (addBtn) addBtn.addEventListener("click", () => addActivityRow(tbodyId));
        if (removeBtn) removeBtn.addEventListener("click", () => removeLastRow(tbodyId));
      });

      try {
        const raw = localStorage.getItem("routineClockSchedule");
        if (raw) {
          const data = JSON.parse(raw);

          if (
            data &&
            data.palette &&
            document.querySelector(`input[name="palette"][value="${data.palette}"]`)
          ) {
            document
              .querySelector(`input[name="palette"][value="${data.palette}"]`)
              .checked = true;
          }

          if (data.mon_fri) {
            fillTable(data.mon_fri.day, "#weekday-day-rows");
            fillTable(data.mon_fri.night, "#weekday-night-rows");
          }
          if (data.weekend) {
            fillTable(data.weekend.day, "#weekend-day-rows");
            fillTable(data.weekend.night, "#weekend-night-rows");
          }
        }
      } catch (e) {
        console.error("Error loading existing schedule", e);
      }

      const saveBtn = document.getElementById("save-and-open");
      if (saveBtn) {
        saveBtn.addEventListener("click", () => {
          const status = document.getElementById("status");
          if (status) status.textContent = "";

          const paletteInput = document.querySelector('input[name="palette"]:checked');
          const paletteKey = paletteInput ? paletteInput.value : "soft";
          const colors = PALETTES[paletteKey];

          const weekdayDay = collectTasks("weekday-day-rows", colors);
          const weekdayNight = collectTasks("weekday-night-rows", colors);
          const weekendDay = collectTasks("weekend-day-rows", colors);
          const weekendNight = collectTasks("weekend-night-rows", colors);

          if (
            weekdayDay.length === 0 &&
            weekdayNight.length === 0 &&
            weekendDay.length === 0 &&
            weekendNight.length === 0
          ) {
            if (status) {
              status.textContent = "Please add at least one activity before saving.";
            }
            return;
          }

          const scheduleData = {
            palette: paletteKey,
            mon_fri: {
              day: weekdayDay,
              night: weekdayNight
            },
            weekend: {
              day: weekendDay,
              night: weekendNight
            }
          };

          try {
            localStorage.setItem("routineClockSchedule", JSON.stringify(scheduleData));
            if (status) {
              status.textContent = "Schedule saved on this device. Opening clockâ€¦";
            }
            window.location.href = "./index.html";
          } catch (e) {
            console.error("Error saving schedule", e);
            if (status) {
              status.textContent =
                "There was a problem saving. Make sure this browser allows local storage.";
            }
          }
        });
      }

      const clearBtn = document.getElementById("clear-schedule");
      if (clearBtn) {
        clearBtn.addEventListener("click", () => {
          localStorage.removeItem("routineClockSchedule");
          const status = document.getElementById("status");
          if (status) {
            status.textContent = "Saved schedule cleared on this device.";
          }
        });
      }
    });
  </script>
</body>
</html>

























